---
title: "group_4_MA7419_CW"
author: "hads2, sba11, js1392..."
date: "2025-11-17"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```

Questions

```{r message = FALSE}
library(readr)
cO2_data <- read_csv("Data/co-emissions-per-capita.csv")
electricty_pd <- read_csv("Data/electricity-prod-source-stacked.csv")
electricity_gt <- read_csv("Data/per-capita-electricity-generation.csv")
co2_sector <- read_csv("Data/per-capita-co2-sector.csv")
co2_vs_renw <- read_csv("Data/co2-per-capita-vs-renewable-electricity.csv")
```

## Slide 1: Jagroop

Title: How does Italy's reduction of carbon emissions compare to its
region and USA and China?

## Slide 2: Rahul

Overview Objectives: The objective is to assess Italy's relative
performance using key metrics like total emissions change, per-capita
figures, and renewable energy adoption.

## Slide 3:

Method: Shahil

## Slide 4: Sahadat

Q1) How does Italy compare to ... in CO2 emissions?: 
graph of CO2 emissions, 1990-2024- compare italy to UK, France, Germany, EU, US, China short bullet points discussing the results, link to pulic interest
```{r}

library(ggplot2)
library(paletteer)
library(readr)
library(dplyr)
library(forcats)

Data1 <- cO2_data |>
  filter(Year >= 1990, Entity %in% c("Italy", "France", "Germany", "United Kingdom", "European Union (27)", "China", "United States")) |> 
  rename(emissions_pc = "Annual CO₂ emissions (per capita)") |>
  mutate(Entity = fct_reorder2(Entity, Year, emissions_pc))

                             
ggplot(Data1, aes(x = Year, y = emissions_pc, color = Entity, group = Entity)) +
  geom_line(size = 1.2, alpha = 0.8) +
  
  geom_line(data = filter(Data1, Entity == "Italy"), 
            size = 1.2, color = "Blue") +
  geom_point(data = filter(Data1, Entity == "Italy"),
             size = 2, color = "Blue", fill = "Blue", shape = 21) +
  
  scale_fill_paletteer_d("ggthemes::Tableu_10")+

  labs(
    title = "Comparing Italy's annual CO2 Emissions per Capita (1990 - 2024)",
    y = "per Capita CO2 Emissions (Million Tonnes)",
    X = NULL,
    color = "Country"
  ) +
  
  theme_minimal() +
  theme(
    plot.title = element_text(face = "bold", size = 16),
    legend.position = "right"
  )

# Analysis 
# Italy occupies a "middle ground" among major European economies, consistently emitting less CO₂ per person than Germany and the wider European Union average, while remaining higher than France. Although Italy generally mirrors the EU’s aggregate downward trend, dropping from ~7.5 to ~5 tonnes per capita.
#The United States operates on a vastly larger scale, emitting nearly triple Italy’s per capita volume (~14 vs. ~5 tonnes). However, China follows an inverse trajectory, fueled by rapid industrialization. It surged from ~2 tonnes in 1990 to overtake Italy’s declining path around 2012, reaching nearly 9 tonnes today.

```


## Slide 5: Hermann

Q2) What is Italy's Per capita CO₂ emissions by sector? graph:
graph of taly's Per capita CO₂ emissions by sector (bar chart) for 2022

```{r}

library(dplyr)
library(janitor)
library(tidyverse)
library(stringr)
library(ggplot2)
library(gganimate)
library(forcats)
library(viridis)
co2_sector <- clean_names(co2_sector, case = "snake") 
clCo2 <- co2_sector |> select(-per_capita_fugitive_emissions_of_carbon_dioxide_from_energy_production)



CS <- clCo2  |> rename(
  "Buildings" = per_capita_carbon_dioxide_emissions_from_buildings,
  "electricity_and_heat" = per_capita_carbon_dioxide_emissions_from_electricity_and_heat,
  "industry" = per_capita_carbon_dioxide_emissions_from_industry,
  "bunker_fuels" = per_capita_carbon_dioxide_emissions_from_bunker_fuels,
  "land_use_change_and_forestry" = per_capita_carbon_dioxide_emissions_from_land_use_change_and_forestry,
  "emissions_from_transport" = per_capita_carbon_dioxide_emissions_from_transport,
  "manufacturing_and_construction" = per_capita_carbon_dioxide_emissions_from_manufacturing_and_construction,
  "other_fuel_combustion" = per_capita_carbon_dioxide_emissions_from_other_fuel_combustion)
# 
CS <- CS |> pivot_longer(cols = c(Buildings,
                                   electricity_and_heat,
                                   industry,
                                   bunker_fuels,
                                   land_use_change_and_forestry,
                                   emissions_from_transport,
                                   manufacturing_and_construction,
                                   other_fuel_combustion),
                          names_to = "sector",
                          values_to = "emission") |> 
  mutate(emission= round_half_up(emission, -1)) |> 
  arrange(desc(emission))

CS2 <- CS |> filter(year == 2022, code == "ITA") 



# ggplot(CS2, aes(x=sector, y=emission)) + 
#   geom_bar(stat = "identity") +
#   coord_flip()

CS2 |> 
  filter(!is.na(emission)) |> 
  mutate(sector = fct_reorder(sector, emission)) |> 
  ggplot( aes(x=sector, y=emission,fill= sector)) +
  geom_bar(stat="identity", alpha=.6, width=.4) +
  geom_text(aes(label = emission), hjust = "left") +
  guides(fill="none") +
  coord_flip() +
  labs(title = "CO2 emissions per sector",
     x = "Emissions (Kg)",
     y = "")+
  xlab("") +
  theme_bw()

CS3 <- CS |> filter(entity == "Italy") 

ggplot(CS3, aes(x=sector, y=emission, fill=sector)) +
  geom_bar(stat='identity') +
  guides(fill="none") +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) 

```


```{r message=FALSE, warning=FALSE}
library(ggthemes)
ggplot(CS3, aes(x = year, y = emission, colour = sector)) +
  geom_line()+
  geom_point() +
  geom_text(aes(label = sprintf("%d", round(emission))), hjust = "left") +
  labs(title = "CO2 emissions per sector",
     x = "",
     y = "Emissions (Kg)",
     color = "Sector")+
   scale_color_manual(values=c("blue", "orange", "red", "darkorange", "purple","violet","maroon","darkgreen"))+
  theme(axis.text.x = element_text(size = 14), axis.title.x = element_text(size = 16),
        axis.text.y = element_text(size = 14), axis.title.y = element_text(size = 16),
        plot.title = element_text(size = 20, face = "bold", color = "darkgreen"))+
  transition_reveal(year) 


ggplot(CS3, aes(x = year, y = emission, colour = sector)) +
  geom_line()+
  geom_point() +
  # geom_text(aes(label = sprintf("%d", round(emission))), hjust = "left") +
  labs(title = "CO2 emissions per sector",
     x = "",
     y = "Emissions (Kg)")+
  theme() +
  theme(axis.text.x = element_text(size = 10), axis.title.x = element_text(size = 10),
        axis.text.y = element_text(size = 10), axis.title.y = element_text(size = 10),
        plot.title = element_text(size = 20, face = "bold", color = "darkgreen"),
        legend.title = element_text(family = "Roboto",
                                    color = "maroon", 
                                    size = 10,
                                    face = 2),
        legend.key.size = unit(0.00001, units = "mm"))+
  theme(legend.position = "right")

```




## Slide 6: Rahul

line graph of electricity and heat production for Italy vs ....
discuss the reulst and link to public interest 

## Slide 7: SHahil maybe

Q3) what percentage of Italy's energy production come form renewable
sources?

Line graph - percentage of Italy's energy production for 1990-2022

## Slide 8: Jagroop
Pie chart - percentage of Italy's energy production for 22
discuss the results and how it links to the public interest.


discuss the results and how it links to the public interest.

## Slide 9: Sahadat

Q4) Italy's environmental policy campare to ....?

## Slide 10: Hermann

Conclusion
