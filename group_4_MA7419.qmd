---
title: "group_4_MA7419_CW"
format: revealjs
incremental: true
logo: University.png
editor: visual
theme: simple

---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
```


```{r message = FALSE}
library(readr)
library(dplyr)
library(janitor)
library(tidyverse)
library(stringr)
library(ggplot2)
library(gganimate)
library(forcats)
library(viridis)
library(ggthemes)
library(paletteer)
library(palette)

emissions_pc <- read_csv("Data/co-emissions-per-capita.csv")
electricty_pd <- read_csv("Data/electricity-prod-source-stacked.csv")
electricity_gt <- read_csv("Data/per-capita-electricity-generation.csv")
co2_sector <- read_csv("Data/per-capita-co2-sector.csv")
co2_vs_renw <- read_csv("Data/co2-per-capita-vs-renewable-electricity.csv")
```

## Slide 1: Jagroop

Title: How does Italy's reduction of carbon emissions compare to its
region and USA and China?

## Slide 2: Rahul

Overview Objectives: The objective is to assess Italy's relative
performance using key metrics like total emissions change , per-capita
figures, and renewable energy adoption.

## Slide 3:

Method: Shahil

## Slide 4: Sahadat{.smaller}

Q1) How does Italy compare to ... in CO2 emissions?: 
graph of CO2 emissions, 1990-2024- compare italy to UK, France, Germany, EU, US,
China short bullet points discussing the results, link to pulic interest

## Slide 5: Hermann {.smaller}

Q2) What is Italy's Per capita CO₂ emissions by sector? 
::: {.columns}

::: {.column width = "60%"}
```{r}

  
co2_sector <- clean_names(co2_sector, case = "snake") 
clCo2 <- co2_sector |> select(-per_capita_fugitive_emissions_of_carbon_dioxide_from_energy_production)



CS <- clCo2  |> rename(
  "Buildings" = per_capita_carbon_dioxide_emissions_from_buildings,
  "electricity and heat" = per_capita_carbon_dioxide_emissions_from_electricity_and_heat,
  "industry" = per_capita_carbon_dioxide_emissions_from_industry,
  "bunker fuels" = per_capita_carbon_dioxide_emissions_from_bunker_fuels,
  "land use change and forestry" = per_capita_carbon_dioxide_emissions_from_land_use_change_and_forestry,
  "emissions from transport" = per_capita_carbon_dioxide_emissions_from_transport,
  "manufacturing and construction" = per_capita_carbon_dioxide_emissions_from_manufacturing_and_construction,
  "other fuel combustion" = per_capita_carbon_dioxide_emissions_from_other_fuel_combustion)
# 
CS <- CS |> pivot_longer(cols = c("Buildings",
                                   "electricity and heat",
                                   "industry",
                                   "bunker fuels",
                                   "land use change and forestry",
                                   "emissions from transport",
                                   "manufacturing and construction",
                                   "other fuel combustion"),
                          names_to = "sector",
                          values_to = "emission") |> 
  mutate(emission= round_half_up(emission, -1)) |> 
  arrange(desc(emission))

CS2 <- CS |> filter(year == 2022, code == "ITA") 


CS2 |> 
  filter(!is.na(emission)) |> 
  mutate(sector = fct_reorder(sector, emission)) |> 
  ggplot( aes(x=sector, y=emission,fill= sector)) +
  geom_bar(stat="identity", 
           alpha=.8, 
           width=.6, 
           colour = "black", 
           lineend =  "round", 
           linejoin = "mitre") +
  geom_text(aes(label = emission), hjust = "left") +
  guides(fill="none") +
  coord_flip() +
  scale_fill_paletteer_d("ggthemes::Tableau_10") +
  theme(plot.background = element_rect(fill = "white"))+
  theme_fivethirtyeight(base_size = 8, base_family = "sans")+
  labs(title = "Italy's 2022 CO2 emissions (kg) per capita by sector",
     x = "Emissions (Kg)",
     y = "Emissions (Kg)")

CS3 <- CS |> filter(entity == "Italy")


```
:::
::: {.column width = "40%"} 
- Top Emitters: Electricity/heat (1,790) and transport (1,740) account for ~50% of emissions. Energy use and mobility are key targets.
- Mid-Tier: Buildings (890) and manufacturing (650) show moderate impact, indicating Italy's less industrialized economy.
- Carbon Sink: Land use/forestry (-220) provides a carbon offset.
:::

## next
::: {nonincremental}
```{r}

latest <- CS3 |> filter(year == max(year)) |> arrange(desc(emission))
CS3$sector <- factor(CS3$sector, levels = latest$sector)

ggplot(CS3, aes(x = year, y = emission, colour = sector)) +
  geom_line()+
  geom_point() +
  labs(title = "Italy's per capita CO2 emissions by sector",
     x = "",
     y = "Emissions (kg per capita)",
     )+
  labs(subtitle = "1990–2022")+
  scale_colour_manual(values = c(
  "electricity and heat" = "brown",
  "emissions from transport" = "darkgreen",
  "Buildings" = "darkblue",
  "manufacturing and construction" = "red",
  "bunker fuels" = "purple",
  "industry" = "orange",
  "other fuel combustion" = "#4575b4",
  "land use change and forestry" = "chocolate"
))+
  theme_minimal(base_size = 9, base_family = "sans")+
  scale_x_continuous(breaks = seq(1990, 2022, 5)) +
  theme(plot.background = element_rect(fill = "white"))+
  theme(axis.text.x = element_text(size = 8, face = "bold"),
        axis.text.y = element_text(size = 8, face = "bold"), 
        axis.title.y = element_text(size = 8, face = "bold"),
        plot.title = element_text(size = 12, face = "bold", color = "brown"),
        legend.title = element_text(family = "Roboto",
                                    face = "bold",
                                    size = 8),
        legend.text  = element_text(size = 6))+
  theme(legend.position = "right")+
  transition_reveal(year, keep_last = TRUE) 

```
:::

## version 2
::: {nonincremental}
```{r}
ggplot(CS3, aes(x = year, y = emission, colour = sector)) +
  geom_line()+
  geom_point() +
  labs(title = "Italy's per capita CO2 emissions by sector",
     x = "",
     y = "Emissions (kg per capita)",
     )+
  labs(subtitle = "1990–2022")+
  scale_colour_manual(values = c(
  "electricity and heat" = "brown",
  "emissions from transport" = "darkgreen",
  "Buildings" = "darkblue",
  "manufacturing and construction" = "red",
  "bunker fuels" = "purple",
  "industry" = "orange",
  "other fuel combustion" = "#4575b4",
  "land use change and forestry" = "chocolate"
))+
  theme_minimal(base_size = 9, base_family = "sans")+
  scale_x_continuous(breaks = seq(1990, 2022, 5)) +
  theme(plot.background = element_rect(fill = "white"))+
  theme(axis.text.x = element_text(size = 8, face = "bold"),
        axis.text.y = element_text(size = 8, face = "bold"), 
        axis.title.y = element_text(size = 8, face = "bold"),
        plot.title = element_text(size = 12, face = "bold", color = "brown"),
        legend.title = element_text(family = "Roboto",
                                    face = "bold",
                                    size = 8),
        legend.text  = element_text(size = 6))+
  theme(legend.position = "right")
```
:::

## version 3{.smaller}

```{r}


CS3 |> 
  ggplot(aes(x = year, y = emission, fill = sector)) +
  geom_area(alpha = 0.75) +
  labs(
    title = "Italy's per capita CO₂ emissions by sector",
    subtitle = "1990–2022 • Stacked contributions of major sectors",
    y = "Emissions (kg per capita)",
    x = "",
    fill = "Sector"
  ) +
  scale_fill_paletteer_d("MexBrewer::Huida") +
  scale_x_continuous(breaks = seq(1990, 2022, 5)) +
  theme_minimal(base_size = 10) +
  theme(plot.background = element_rect(fill = "white"))+
  theme(
    legend.position = "right",
    legend.title = element_text(size = 9, face = "bold"),
    legend.text  = element_text(size = 6),
    plot.title = element_text(size = 16, face = "bold", colour = "chocolate4"),
    plot.subtitle = element_text(size = 11),
    axis.title.y = element_text(size = 10),
    axis.text.x = element_text(size = 8, face = "bold"),
    axis.text.y = element_text(size = 8, face = "bold")
  )


```

## Slide 6: Rahul{.smaller}

line graph of electricity and heat production for Italy vs ....
discuss the reulst and link to public interest 

## Slide 7: SHahil{.smaller}

Q3) what percentage of Italy's energy production come form renewable
sources?

Line graph - percentage of Italy's energy production for 1990-2022

## Slide 8: Jagroop
Pie chart - percentage of Italy's energy production for 22
discuss the results and how it links to the public interest.


discuss the results and how it links to the public interest.

## Slide 9: Sahadat

Q4) Italy's environmental policy campare to ....?

## Slide 10: Hermann

Conclusion
